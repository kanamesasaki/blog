{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/20220124-gatsby-blog/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Blog"}},"markdownRemark":{"id":"4465dfed-35d0-5569-8efc-23fc51661d64","excerpt":"Gatsbyのセットアップ 以下のコマンドでグローバルにgatsby-cliをインストールする． これでgatsbyコマンドが使えるはずだが，もしコマンドが認識されないようなら，\r\ngatsby-cliのインストール先にパスが通っていない可能性がある．\r\nその場合には，インストール先(C:\\Users\\username…","html":"<h2>Gatsbyのセットアップ</h2>\n<p>以下のコマンドでグローバルにgatsby-cliをインストールする．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gatsby-cli</code></pre></div>\n<p>これでgatsbyコマンドが使えるはずだが，もしコマンドが認識されないようなら，\r\ngatsby-cliのインストール先にパスが通っていない可能性がある．\r\nその場合には，インストール先(C:\\Users\\username\\AppData\\Roaming\\npm)を環境変数のPathに追加すればよい．\r\nインストール先は以下のコマンドでも確認できる．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> bin -g</code></pre></div>\n<p>gatsbyではstarterと呼ばれる様々なサイトテンプレートが利用できる．\r\n今回はその中から，gatsby-starter-blogを用いてブログのセットアップをする．\r\n以下のコマンドで，blogフォルダ（プロジェクトのルートディレクトリ）内にgatsby-starter-blogのコードが展開される．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby new blog https://github.com/gatsbyjs/gatsby-starter-blog</code></pre></div>\n<p>プロジェクトのルートディレクトリに移動してdevelopコマンドを打つと，開発用サーバーがたてられる．\r\nブラウザからlocalhost:8000にアクセスすると，実際にウェブサイトが表示されるはずだ．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token builtin class-name\">cd</span> blog\r\ngatsby develop</code></pre></div>\n<h2>Github Pagesにウェブサイトをデプロイする</h2>\n<p>GitHub Pagesの機能を用いると，GitHubで管理しているコード・記事を元に，ウェブサイトを公開することが出来る．\r\n公開元として，自由にブランチを指定でき，さらにフォルダをルートまたはdocsフォルダから指定できる．</p>\n<p>今やりたいこととしては，ソースコードはGitで監視してmainブランチに置き，\r\nビルド結果は，mainブランチに含めたくないしGitで監視する必要もないので，gh-pagesブランチに置いてウェブサイトの公開だけしたい．\r\nnpmのgh-pagesパッケージを利用すると，この辺りをうまいことやってくれる．</p>\n<p>まずgh-pagesパッケージをグローバルにインストールしておく．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> -g gh-pages --save-dev</code></pre></div>\n<p>GitHubでblogリポジトリを新しく作成して，これをリモートリポジトリに指定する．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> remote <span class=\"token function\">add</span> origin git@github.com:username/blog.git</code></pre></div>\n<p>ソースコードは普通にmainブランチにpushすればOK．\r\npublicフォルダは.gitignoreに指定されているので，Gitには監視されていない．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">git</span> push origin main</code></pre></div>\n<p>GitHub Pagesを使ってblogという名前でプロジェクトサイトを作る場合，トップページがこのようなURL(<a href=\"https://username.github.io/blog/)%E3%81%AB%E3%81%AA%E3%82%8B%EF%BC%8E\">https://username.github.io/blog/)になる．</a>\r\n各ページへのパスを/blog/以下に割り振るために，gatsby-config.jsにpathPrefixを追加して，ビルドする際に—prefix-pathsフラグを入れる．</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">module<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\r\n  pathPrefix<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">/blog</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>以下のコマンドでビルドして，publicフォルダ内にファイルが生成されていることを確認する．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gatsby build --prefix-paths</code></pre></div>\n<p>以下のコマンドを打つと，gh-pagesブランチにpublicフォルダの中身がpushされる．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\">gh-pages -d public</code></pre></div>\n<h2>Markdownで数式を使えるようにする</h2>\n<p>このままだとMarkdownファイルの中で数式が使えないので，gatsby-remark-katexとkatexをインストールする．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-remark-katex katex</code></pre></div>\n<p>gatsby-starter-blogを使っていると，gatsby-config.jsの中にgatsby-transformer-remarkに関するスクリプトがあるはずなので，そこにgatsby-remark-katexを追加する．</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">{</span>\r\n  resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-transformer-remark</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n  options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n    plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n      <span class=\"token punctuation\">{</span>\r\n        resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-images</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          maxWidth<span class=\"token operator\">:</span> <span class=\"token number\">630</span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">{</span>\r\n        resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-responsive-iframe</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          wrapperStyle<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">margin-bottom: 1.0725rem</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-prismjs</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-copy-linked-files</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-smartypants</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n      <span class=\"token punctuation\">{</span>\r\n        resolve<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">gatsby-remark-katex</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\r\n        options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n          <span class=\"token comment\">// Add any KaTeX options from https://github.com/KaTeX/KaTeX/blob/master/docs/options.md here</span>\r\n          strict<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ignore</span><span class=\"token template-punctuation string\">`</span></span>\r\n        <span class=\"token punctuation\">}</span>\r\n      <span class=\"token punctuation\">}</span>\r\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\r\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\r\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span></code></pre></div>\n<p>\\src\\templates\\blog-post.jsに以下のスクリプトを追加する．</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"katex/dist/katex.min.css\"</span></code></pre></div>\n<h2>図の挿入について</h2>\n<p>gatsby-starter-blogではMarkdownの書式を用いて，以下のように図を挿入することが出来る．</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token url\"><span class=\"token operator\">!</span>[<span class=\"token content\">figurename</span>](<span class=\"token url\">.\\figurename.jpg</span>)</span></code></pre></div>\n<p>ただこの状態では，svgやgifの使用，幅・高さの設定等ができないので，gatsby-remark-static-imagesをインストールして，gatsby-config.jsにスクリプトを追加する．</p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> gatsby-remark-static-images</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// gatsby-config.js</span>\r\nplugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n  <span class=\"token punctuation\">{</span>\r\n    resolve<span class=\"token operator\">:</span> <span class=\"token string\">'gatsby-transformer-remark'</span><span class=\"token punctuation\">,</span>\r\n    options<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\r\n      plugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\r\n        <span class=\"token string\">'gatsby-remark-static-images'</span>\r\n      <span class=\"token punctuation\">]</span>\r\n    <span class=\"token punctuation\">}</span>\r\n  <span class=\"token punctuation\">}</span>\r\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>これでsvgやgifもMarkdownの書式で挿入できるが，さらに図の幅や位置を指定したい場合は，以下のようにHTMLの書式で挿入することが出来る．</p>\n<div class=\"gatsby-highlight\" data-language=\"markdown\"><pre class=\"language-markdown\"><code class=\"language-markdown\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">align</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>center<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>img</span> <span class=\"token attr-name\">src</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>.\\figurename.svg<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">width</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>300<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span></code></pre></div>","frontmatter":{"title":"GatsbyとGitHub Pagesで作るMarkdownブログ","date":"January 24, 2022","description":"How to setup a Markdown format blog based on Gatsby and GitHub Pages"}},"previous":{"fields":{"slug":"/20200426-spin/"},"frontmatter":{"title":"[量子力学] スピン"}},"next":{"fields":{"slug":"/20220125-read-pixels/"},"frontmatter":{"title":"フラグメントシェーダからCPUへのデータ受け渡し"}}},"pageContext":{"id":"4465dfed-35d0-5569-8efc-23fc51661d64","previousPostId":"35ccb4e4-b54c-5503-9167-1c335dfb75df","nextPostId":"fd053499-ca77-53fc-8526-c99e67f2ff85"}},
    "staticQueryHashes": ["2841359383","3257411868"]}